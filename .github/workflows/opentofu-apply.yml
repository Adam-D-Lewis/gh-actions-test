name: OpenTofu Apply Workflow

on:
  workflow_dispatch:

jobs:
  opentofu-apply:
    runs-on: ubuntu-latest

    defaults:
      run:
        shell: bash

    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Setup OpenTofu
      uses: opentofu/setup-opentofu@v1.0.6
      with:
        terraform_wrapper: false
    
    - name: apply directly
      run: |
        tofu init
        tofu apply -auto-approve

    # - name: Run makefile apply command
    #   run: make apply